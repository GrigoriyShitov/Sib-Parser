#include <iostream>
#include <stdint.h>
#include "Sibs.h"
using namespace std;

#define SYSTEM_INFORMATION_TYPE_1 0x19
#define SYSTEM_INFORMATION_TYPE_2 0x1a


int main() {
	GSMTAPPACK sib;
	//uint8_t packet[23] = { 0x55, 0x06, 0x19, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x20, 0x02, 0x00, 0xb8, 0x00, 0x00, 0x2b };
	uint8_t packet[23] = { 0x55, 0x06, 0x1a, 0x15, 0x54, 0x00, 0x00, 0x00, 0x15, 0x48, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0xb8, 0x00, 0x00 };
	uint8_t* ptr = packet;
	//общая часть для всех SIT пакетов
	sib.L2PseudoL = *ptr++;
	sib.ProtDisc = *ptr & 0x0f;
	sib.SkipInd = *ptr & 0xf0;
	sib.MesType = *(++ptr);

	
	if (sib.MesType == SYSTEM_INFORMATION_TYPE_1){

		Sib1Pack pack;		
		memcpy(&pack, &sib, sizeof(GSMTAPPACK));
		bool res = pack.Parse(++ptr);
	}
	else if (sib.MesType == SYSTEM_INFORMATION_TYPE_2){
		Sib2Pack pack;
		memcpy(&pack, &sib, sizeof(GSMTAPPACK));
		bool res = pack.Parse(++ptr);

	}
	return 0;
}